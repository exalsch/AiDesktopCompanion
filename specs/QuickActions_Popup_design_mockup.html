<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borderless Popup Mockup</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Light background for contrast */
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Prevent body scroll when dragging */
        }
        .draggable-popup {
            /* Initial positioning, will be updated by JS */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: grab; /* Indicate draggable */
            user-select: none; /* Prevent text selection during drag */
            z-index: 1000; /* Ensure it stays on top */
        }
        .draggable-popup.dragging {
            cursor: grabbing;
        }
    </style>
</head>
  <body class="bg-gray-100 flex items-center justify-center h-screen w-screen">

    <div id="popup" role="group" aria-label="Quick Actions Popup" class="draggable-popup
                bg-gray-800/80 backdrop-blur-sm
                rounded-xl p-3 shadow-2xl
                flex flex-wrap justify-center gap-3
                sm:flex-nowrap">
        <!-- Selection Preview (placeholder). Truncated; shows count badge. -->
        <div id="selectionPreview" class="w-full basis-full bg-gray-900/50 text-gray-100 rounded-md px-3 py-1 flex items-center gap-2 truncate"
             aria-live="polite" title="Selected text preview (up to 200 chars)">
            <span class="text-xs truncate">Selected: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua…</span>
            <span class="ml-auto text-[10px] px-1.5 py-0.5 rounded bg-gray-700/70">124</span>
        </div>

        <!-- Prompt Button -->
        <button aria-label="Prompt (P)" title="Prompt (P)" class="flex flex-col items-center justify-center p-3 sm:p-2 bg-blue-600/80 text-white rounded-lg
                       hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75
                       w-20 h-20 sm:w-16 sm:h-16 text-xs sm:text-base">
            <!-- Icon for Prompt (Pen Tool) from Lucide Icons -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pen-tool mb-1">
                <path d="m12 19 7-7 3 3-7 7-3-3z"/>
                <path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                <path d="m2 2 7.586 7.586"/>
                <circle cx="11" cy="11" r="2"/>
            </svg>
            <span><span class="underline underline-offset-2">P</span>rompt</span>
        </button>

        <!-- STT Button -->
        <button aria-label="Speech to Text (S)" title="Speech to Text (S)" class="flex flex-col items-center justify-center p-3 sm:p-2 bg-purple-600/80 text-white rounded-lg
                       hover:bg-purple-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75
                       w-20 h-20 sm:w-16 sm:h-16 text-xs sm:text-base">
            <!-- Icon for STT (Mic) from Lucide Icons -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mic mb-1">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                <line x1="12" x2="12" y1="19" y2="22"/>
            </svg>
            <span><span class="underline underline-offset-2">S</span>TT</span>
        </button>

        <!-- TTS Button -->
        <button aria-label="Text to Speech (T)" title="Text to Speech (T)" class="flex flex-col items-center justify-center p-3 sm:p-2 bg-green-600/80 text-white rounded-lg
                       hover:bg-green-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75
                       w-20 h-20 sm:w-16 sm:h-16 text-xs sm:text-base">
            <!-- Icon for TTS (Speaker) from Lucide Icons -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-volume-2 mb-1">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
            </svg>
            <span><span class="underline underline-offset-2">T</span>TS</span>
        </button>

        <!-- Image (Screenshot) Button -->
        <button aria-label="Image Capture (I)" title="Image Capture (I)" class="flex flex-col items-center justify-center p-3 sm:p-2 bg-yellow-600/80 text-white rounded-lg
                       hover:bg-yellow-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-75
                       w-20 h-20 sm:w-16 sm:h-16 text-xs sm:text-base">
            <!-- Icon for Screenshot (Crop) from Lucide Icons -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-crop mb-1">
                <path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"/>
                <path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"/>
            </svg>
            <span><span class="underline underline-offset-2">I</span>mage</span>
        </button>

        <!-- Settings/More Button (Fifth Button) -->
        <button aria-label="More" title="More" class="flex flex-col items-center justify-center p-3 sm:p-2 bg-gray-600/80 text-white rounded-lg
                       hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75
                       w-20 h-20 sm:w-16 sm:h-16 text-xs sm:text-base">
            <!-- Icon for Settings (Gear) from Lucide Icons -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings mb-1">
                <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.78 1.28a2 2 0 0 0 .73 2.73l.04.02a2 2 0 0 1 .97 2.18v.44a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.78 1.28a2 2 0 0 0 .73 2.73l.04.02a2 2 0 0 1 .97 2.18v.44a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.78-1.28a2 2 0 0 0-.73-2.73l-.04-.02a2 2 0 0 1-.97-2.18v-.44a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.78-1.28a2 2 0 0 0-.73-2.73l-.04-.02a2 2 0 0 1-.97-2.18V4a2 2 0 0 0-2-2z"/>
                <circle cx="12" cy="12" r="3"/>
            </svg>
            More
        </button>

        <!-- Quick Prompts hint -->
        <div class="w-full basis-full text-[11px] text-gray-200/80 text-center mt-1" aria-hidden="true">Quick Prompts: 1–9</div>

    </div>

    <script>
        const popup = document.getElementById('popup');
        let isDragging = false;
        let offsetX, offsetY;

        // Function to constrain the popup within the viewport
        function constrainPosition(x, y) {
            const maxX = window.innerWidth - popup.offsetWidth;
            const maxY = window.innerHeight - popup.offsetHeight;
            return {
                x: Math.min(Math.max(0, x), maxX),
                y: Math.min(Math.max(0, y), maxY)
            };
        }

        popup.addEventListener('mousedown', (e) => {
            isDragging = true;
            popup.classList.add('dragging');
            // Calculate offset relative to the popup's current position
            const rect = popup.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;

            // Prevent default drag behavior to avoid issues with text selection etc.
            e.preventDefault();
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;

            // Calculate new position
            let newX = e.clientX - offsetX;
            let newY = e.clientY - offsetY;

            // Constrain position to viewport
            const constrained = constrainPosition(newX, newY);
            newX = constrained.x;
            newY = constrained.y;

            // Apply new position using 'left' and 'top'
            popup.style.left = `${newX}px`;
            popup.style.top = `${newY}px`;
            // Remove transform: translate(-50%, -50%) once dragging starts to avoid jumping
            popup.style.transform = 'none';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            popup.classList.remove('dragging');
        });

        // Handle touch events for mobile
        popup.addEventListener('touchstart', (e) => {
            isDragging = true;
            popup.classList.add('dragging');
            const touch = e.touches[0];
            const rect = popup.getBoundingClientRect();
            offsetX = touch.clientX - rect.left;
            offsetY = touch.clientY - rect.top;
            e.preventDefault();
        });

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            const touch = e.touches[0];
            let newX = touch.clientX - offsetX;
            let newY = touch.clientY - offsetY;

            const constrained = constrainPosition(newX, newY);
            newX = constrained.x;
            newY = constrained.y;

            popup.style.left = `${newX}px`;
            popup.style.top = `${newY}px`;
            popup.style.transform = 'none';
            e.preventDefault();
        });

        document.addEventListener('touchend', () => {
            isDragging = false;
            popup.classList.remove('dragging');
        });

        // Adjust position on window resize to ensure it stays within bounds
        window.addEventListener('resize', () => {
            const currentRect = popup.getBoundingClientRect();
            const constrained = constrainPosition(currentRect.left, currentRect.top);
            popup.style.left = `${constrained.x}px`;
            popup.style.top = `${constrained.y}px`;
        });

        // Initialize position on load
        window.onload = function() {
            // Apply initial position for centering based on popup size
            const rect = popup.getBoundingClientRect();
            popup.style.left = `calc(50% - ${rect.width / 2}px)`;
            popup.style.top = `calc(50% - ${rect.height / 2}px)`;
        };

    </script>
</body>
</html>
